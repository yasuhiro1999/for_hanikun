<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ノンモラルプロダクションお問い合わせ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>お問い合わせ</h1>
    <nav>
      <ul>
        <li><a href="index.html">トップページ</a></li>
        <li><a href="members.html">所属者ページ</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="contact-form">
      <form id="contactForm">
        <label for="name">お名前</label><br>
        <input type="text" id="name" name="name" required><br><br>

        <label for="email">メールアドレス</label><br>
        <input type="email" id="email" name="email" required><br><br>

        <label for="message">お問い合わせ内容</label><br>
        <textarea id="message" name="message" rows="6" required></textarea><br><br>

        <button type="submit">送信</button>
      </form>
      <p id="formMessage" style="color:red; font-weight:bold; margin-top:10px;"></p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 ノンモラルプロダクション</p>
  </footer>

  <!-- EmailJS SDK v4 (CDN版) -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // EmailJS初期化
    (function(){
      emailjs.init("lYOAj5IgoIc8tBlEp"); // あなたのPublic Key
    })();

    document.getElementById("contactForm").addEventListener("submit", function(event) {
      event.preventDefault();

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const message = document.getElementById("message").value.trim();

      // バリデーション: メールアドレスに「@」が含まれているか
      if (!email.includes("@")) {
        document.getElementById("formMessage").innerText = "正しいメールアドレスを入力してください。";
        return;
      }

      const params = { name, email, message };

      // 管理者宛てメール送信
      emailjs.send("service_3gpkzna", "template_gfnqpwa", params)
        .then(() => {
          document.getElementById("formMessage").innerText = "送信しました。";
        })
        .catch((error) => {
          document.getElementById("formMessage").innerText = "送信に失敗しました。";
          console.error(error);
        });
    });
  </script>
</body>
</html>
